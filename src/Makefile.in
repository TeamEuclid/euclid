# Copyright (c) 2012 Jess VanDerwalker <washu@sonic.net>
#
# Makefile for the src/ directory

# @configure_input@

prefix = @prefix@
exec_prefix = @exec_prefix@
bindir = @bindir@

PACKAGE = @PACKAGE_NAME@
VERSION = @PACKAGE_VERSION@

CFLAGS = -Wall -g -O0 -c
INCLUDES = -I/opt/X11/include
# May need to change this
LDFLAGS = -L/opt/X11/lib -lxcb-util -lxcb-damage -lxcb-composite -lxcb-xfixes -lxcb-render -lxcb-shape -lxcb-image -lxcb-shm -lxcb

SOURCES = xtoq.c context_list.c util.c
OBJECTS = $(SOURCES:.c=.o)

all: $(SOURCES) $(OBJECTS)

.c.o:
	$(CC) $(CFLAGS) $(INCLUDES) $< -o $@

clean:
	rm -f *.o

# Rebuild Makefile if necessary
Makefile: Makefile.in ../config.status
	cd .. && ./config.status src/$@

config.status: ../configure
	cd .. && ./config.status --recheck

.PHONY: all clean install uninstall